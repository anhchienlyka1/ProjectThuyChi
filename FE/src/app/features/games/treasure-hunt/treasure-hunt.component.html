<div class="game-container">
    <!-- Header -->
    <div class="game-header">
        <button class="back-button" routerLink="/games">
            โ Trแป lแบกi
        </button>
        <div class="progress-badge">
            ๐ {{ treasuresFound }}/{{ TOTAL_TREASURES }} Kho Bรกu
        </div>
    </div>

    <!-- Game Grid -->
    <div class="game-board">
        <div class="grid-container">
            <div *ngFor="let cell of cells" class="cell" [class.locked]="cell.status === 'locked'"
                [class.unlocked]="cell.status === 'unlocked'" [class.treasure]="cell.status === 'treasure'"
                [class.failed]="cell.status === 'failed'" (click)="onCellClick(cell)">
                <div class="cell-content">
                    <span *ngIf="cell.status === 'locked'" class="icon">โ</span>
                    <span *ngIf="cell.status === 'unlocked'" class="icon">โ</span>
                    <span *ngIf="cell.status === 'treasure'" class="icon treasure-icon">๐</span>
                    <span *ngIf="cell.status === 'failed'" class="icon">โ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Question Modal -->
    <div *ngIf="showQuestion && selectedCell?.question" class="question-overlay" (click)="closeQuestion()">
        <div class="question-modal" (click)="$event.stopPropagation()">
            <h2 class="question-text">{{ selectedCell?.question?.text }}</h2>
            <div class="options-grid">
                <button *ngFor="let option of selectedCell?.question?.options" class="option-btn"
                    (click)="handleAnswer(option)">
                    {{ option }}
                </button>
            </div>
        </div>
    </div>

    <!-- Win Screen -->
    <div *ngIf="gameStatus === 'won'" class="win-overlay">
        <div class="win-modal">
            <h1 class="win-title">๐ Chiแบฟn Thแบฏng! ๐</h1>
            <p class="win-message">Bรฉ ฤรฃ tรฌm ฤฦฐแปฃc tแบฅt cแบฃ {{ TOTAL_TREASURES }} kho bรกu!</p>
            <div class="win-actions">
                <kid-button variant="primary" (click)="restartGame()">Chฦกi Lแบกi</kid-button>
                <kid-button variant="neutral" routerLink="/games">Thoรกt</kid-button>
            </div>
        </div>
    </div>

    <!-- Lose Screen -->
    <div *ngIf="gameStatus === 'lost'" class="lose-overlay">
        <div class="lose-modal">
            <h1 class="lose-title">๐ข Chฦฐa Thรnh Cรดng!</h1>
            <p class="lose-message">Bรฉ ฤรฃ tรฌm ฤฦฐแปฃc {{ treasuresFound }}/{{ TOTAL_TREASURES }} kho bรกu.</p>
            <p class="lose-hint">Hรฃy thแปญ lแบกi nhรฉ! ๐ช</p>
            <div class="lose-actions">
                <kid-button variant="primary" (click)="restartGame()">Chฦกi Lแบกi</kid-button>
                <kid-button variant="neutral" routerLink="/games">Thoรกt</kid-button>
            </div>
        </div>
    </div>
</div>